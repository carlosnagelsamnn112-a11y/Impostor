<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>IMPOSTOR | Juego de Deducci√≥n</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- Logo como favicon -->
    <link rel="icon" type="image/svg+xml" href="logo_impostor.svg">
</head>

<body>

    <!-- PANTALLA PRINCIPAL -->
    <div class="screen" id="pantalla-principal">
        <div class="header-container">
            <div style="width: 80px;"></div>
            <h1 class="titulo-app">
                <!-- Logo en el header principal -->
                <div class="logo-header">
                    <img src="logo_impostor.svg" alt="Logo IMPOSTOR">
                </div>
                IMPOSTOR
            </h1>
            <div style="width: 80px;"></div>
        </div>
        <div class="main-menu">
            <div class="card opcion" onclick="mostrarModo('local')">
                <h3>JUEGO LOCAL</h3>
                <p>Un solo dispositivo</p>
            </div>
            <div class="card opcion" onclick="mostrarModo('multijugador')">
                <h3>MULTIJUGADOR ONLINE</h3>
                <p>Conecta con amigos</p>
            </div>
        </div>
    </div>

    <!-- ========== MODO LOCAL ========== -->

    <!-- Configuraci√≥n Local -->
    <div class="screen hidden" id="pantalla-local-config">
        <div class="header-container">
            <button class="btn-atras" onclick="volverConfigLocal()">‚Üê Atr√°s</button>
            <h2 class="header-title">MODO LOCAL</h2>
            <button class="btn-atras" onclick="confirmarSalirSala()">INICIO</button>
        </div>

        <div class="configuracion">
            <label for="cantidadJugadoresLocal">Jugadores (3-15):</label>
            <select id="cantidadJugadoresLocal" class="select-config">
                <option value="3">3</option>
                <option value="4" selected>4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
            </select>
        </div>

        <div class="configuracion">
            <label for="cantidadImpostoresLocal">Impostores:</label>
            <select id="cantidadImpostoresLocal" class="select-config">
                <option value="1">1</option>
                <option value="2">2</option>
            </select>
            <div class="nota">M√≠nimo 1 por cada 3 jugadores</div>
        </div>

        <div class="configuracion">
            <label for="categoriaLocal">Categor√≠a:</label>
            <select id="categoriaLocal" class="select-config">
                <option value="Objetos">Objetos</option>
                <option value="Animales">Animales</option>
                <option value="Personas">Personas</option>
                <option value="Pa√≠ses">Pa√≠ses</option>
                <option value="Futbolistas">Futbolistas</option>
                <option value="Cantantes">Cantantes</option>
                <option value="ClashRoyale">Clash Royale</option>
            </select>
        </div>

        <div class="configuracion" id="dificultadContainerLocal" style="display: none;">
            <label for="dificultadLocal">Dificultad:</label>
            <select id="dificultadLocal" class="select-config">
                <option value="F√°cil">F√°cil</option>
                <option value="Medio">Medio</option>
                <option value="Dif√≠cil">Dif√≠cil</option>
            </select>
            <div class="nota">Solo aplica para Pa√≠ses, Futbolistas y Cantantes</div>
        </div>

        <div class="row">
            <button onclick="irNombresLocal()">SIGUIENTE</button>
        </div>
    </div>

    <!-- Nombres de Jugadores Local -->
    <div class="screen hidden" id="pantalla-local-nombres">
        <div class="header-container">
            <button class="btn-atras" onclick="volverConfigLocal()">‚Üê Atr√°s</button>
            <h2 class="header-title">NOMBRES DE JUGADORES</h2>
            <button class="btn-atras" onclick="confirmarSalirSala()">INICIO</button>
        </div>

        <div id="contenedorNombresLocal" style="margin: 20px 0;"></div>

        <div class="row">
            <button onclick="iniciarJuegoLocal()">COMENZAR JUEGO</button>
        </div>
    </div>

    <!-- Mostrar Jugador Actual Local -->
    <div class="screen hidden" id="pantalla-local-jugador">
        <div class="header-container">
            <div style="width: 70px;"></div>
            <h2 class="header-title" id="tituloJugadorLocal">TURNO JUGADOR 1</h2>
            <button class="btn-atras" onclick="confirmarSalirSala()">INICIO</button>
        </div>

        <div class="info-jugador">
            <div class="nombre-jugador-display" id="nombreJugadorLocal">Jugador 1</div>
            <div class="info-detalle">
                <div class="info-item">
                    <span class="info-label">Categor√≠a:</span>
                    <span id="categoriaNombreLocal" class="info-valor">Objetos</span>
                </div>
                <div class="info-item" id="dificultadItemLocal" style="display: none;">
                    <span class="info-label">Dificultad:</span>
                    <span id="dificultadNombreLocal" class="info-valor">F√°cil</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Impostores:</span>
                    <span id="impostoresNombreLocal" class="info-valor">1</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Jugadores:</span>
                    <span id="totalJugadoresLocal" class="info-valor">4</span>
                </div>
            </div>
        </div>

        <div class="row">
            <button onclick="verPalabraLocal()">VER</button>
        </div>
    </div>

    <!-- Palabra del Jugador Local -->
    <div class="screen hidden" id="pantalla-local-palabra">
        <div class="header-container">
            <div style="width: 70px;"></div>
            <h2 class="header-title" id="tituloJugadorPalabra">TURNO JUGADOR 1</h2>
            <button class="btn-atras" onclick="confirmarSalirSala()">INICIO</button>
        </div>

        <div class="info-jugador">
            <div class="nombre-jugador-display" id="nombreJugadorPalabra">Jugador 1</div>
            <div class="info-detalle">
                <div class="info-item">
                    <span class="info-label">Categor√≠a:</span>
                    <span id="categoriaPalabra" class="info-valor">Objetos</span>
                </div>
                <div class="info-item" id="dificultadItemPalabra" style="display: none;">
                    <span class="info-label">Dificultad:</span>
                    <span id="dificultadPalabra" class="info-valor">F√°cil</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Impostores:</span>
                    <span id="impostoresPalabra" class="info-valor">1</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Jugadores:</span>
                    <span id="totalJugadoresPalabra" class="info-valor">4</span>
                </div>
            </div>
        </div>

        <div id="palabraJugadorLocal" class="palabra-display">Palabra</div>

        <div class="row">
            <button id="btnSiguienteLocal" onclick="siguienteJugadorLocal()">SIGUIENTE JUGADOR</button>
            <button id="btnFinalizarLocal" class="hidden" onclick="finalizarJuegoLocal()">FINALIZAR</button>
        </div>
    </div>

    <!-- Men√∫ Final Local -->
    <div class="screen hidden" id="pantalla-local-final">
        <div class="header-container">
            <div style="width: 70px;"></div>
            <h2 class="header-title">JUEGO TERMINADO</h2>
            <button class="btn-atras" onclick="confirmarSalirSala()">INICIO</button>
        </div>

        <!-- Contenedor para revelar impostor -->
        <div class="revelar-container">
            <div class="impostor-info hidden" id="impostorRevelado">
                <div class="impostor-titulo" id="impostorTituloLocal">EL IMPOSTOR ES:</div>
                <div id="impostorReveladoTexto" class="impostor-nombre">Jugador 1</div>
            </div>

            <div class="impostor-info hidden" id="palabraReveladaLocal" style="margin-top: 20px; border-color: #4CAF50; background: rgba(76, 175, 80, 0.05);">
                <div class="impostor-titulo" style="color: #4CAF50;">LA PALABRA ERA:</div>
                <div id="palabraReveladaTextoLocal" class="impostor-nombre" style="color: #4CAF50;">Palabra</div>
            </div>

            <div class="row">
                <button onclick="revelarImpostorLocal()">REVELAR IMPOSTOR Y PALABRA</button>
            </div>
        </div>

        <div class="row-buttons">
            <button onclick="volveraJugarLocal()">VOLVER A JUGAR</button>
            <button onclick="volverConfiguracionLocal()">CONFIGURACI√ìN</button>
        </div>
    </div>

    <!-- ========== MODO MULTIJUGADOR ========== -->

    <!-- Paso 1: Nombre -->
    <div class="screen hidden" id="multijugador-nombre">
        <div class="header-container">
            <button class="btn-atras" onclick="volverPrincipal()">‚Üê Atr√°s</button>
            <h2 class="header-title">MULTIJUGADOR</h2>
            <button class="btn-atras" onclick="confirmarSalirSala()">INICIO</button>
        </div>

        <div class="configuracion">
            <label for="nombreJugadorMultijugador">Tu nombre:</label>
            <input type="text" id="nombreJugadorMultijugador" placeholder="Ej: Pez" maxlength="20">
        </div>

        <div class="row">
            <button onclick="continuarMultijugador()">CONTINUAR</button>
        </div>
    </div>

    <!-- Paso 2: Crear o Unirse -->
    <div class="screen hidden" id="multijugador-elegir">
        <div class="header-container">
            <button class="btn-atras" onclick="volverMultijugadorPrincipal()">‚Üê Atr√°s</button>
            <h2 class="header-title">MULTIJUGADOR</h2>
            <button class="btn-atras" onclick="confirmarSalirSala()">INICIO</button>
        </div>

        <div class="main-menu">
            <div class="card opcion" onclick="mostrarCrearSala()">
                <h3>CREAR SALA</h3>
                <p>Nueva sala con c√≥digo</p>
            </div>
            <div class="card opcion" onclick="mostrarUnirseSala()">
                <h3>UNIRSE A SALA</h3>
                <p>Con c√≥digo existente</p>
            </div>
        </div>
    </div>

    <!-- Crear Sala -->
    <div class="screen hidden" id="multijugador-crear">
        <div class="header-container">
            <button class="btn-atras" onclick="volverElegirMultijugador()">‚Üê Atr√°s</button>
            <div style="text-align: center; flex: 1;">
                <h2 class="header-title">CREAR SALA</h2>
                <div style="font-size: 16px; color: #00ccff; margin-top: 5px; font-weight: 500;">ID: <span
                        id="codigoSalaCreador">1A2B3</span></div>
            </div>
            <button class="btn-atras" onclick="confirmarSalirSala()">INICIO</button>
        </div>

        <div class="configuracion">
            <label for="cantidadJugadoresMultijugador">Jugadores (3-15):</label>
            <select id="cantidadJugadoresMultijugador" class="select-config">
                <option value="3">3</option>
                <option value="4" selected>4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
            </select>
        </div>

        <div class="configuracion">
            <label for="cantidadImpostoresMultijugador">Impostores:</label>
            <select id="cantidadImpostoresMultijugador" class="select-config">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
            <div class="nota">M√≠nimo 1 por cada 3 jugadores</div>
        </div>

        <div class="configuracion">
            <label for="categoriaMultijugador">Categor√≠a:</label>
            <select id="categoriaMultijugador" class="select-config">
                <option value="Objetos">Objetos</option>
                <option value="Animales">Animales</option>
                <option value="Personas">Personas</option>
                <option value="Pa√≠ses">Pa√≠ses</option>
                <option value="Futbolistas">Futbolistas</option>
                <option value="Cantantes">Cantantes</option>
                <option value="ClashRoyale">Clash Royale</option>
            </select>
        </div>

        <div class="configuracion" id="dificultadContainerMultijugador" style="display: none;">
            <label for="dificultadMultijugador">Dificultad:</label>
            <select id="dificultadMultijugador" class="select-config">
                <option value="F√°cil">F√°cil</option>
                <option value="Medio">Medio</option>
                <option value="Dif√≠cil">Dif√≠cil</option>
            </select>
            <div class="nota">Solo aplica para Pa√≠ses, Futbolistas y Cantantes</div>
        </div>

        <div style="background: #1a1a1a; padding: 15px; border-radius: 8px; margin: 15px 0; border: 1px solid #333;">
            <h3 style="margin-top: 0; color: white; margin-bottom: 10px;">JUGADORES (<span
                    id="jugadoresActuales">0</span>/<span id="maxJugadoresDisplay">4</span>)</h3>
            <div id="listaJugadoresLobby">
                <!-- Logo en el lobby del creador -->
                <div style="text-align: center; padding: 15px; opacity: 0.7;">
                    <div class="logo-medium">
                        <img src="logo_impostor.svg" alt="Logo IMPOSTOR">
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <button id="btnIniciarJuego" onclick="iniciarJuegoMultijugador()" disabled>üöÄ INICIAR JUEGO</button>
        </div>
    </div>

    <!-- Unirse a Sala -->
    <div class="screen hidden" id="multijugador-unirse">
        <div class="header-container">
            <button class="btn-atras" onclick="volverElegirMultijugador()">‚Üê Atr√°s</button>
            <h2 class="header-title">UNIRSE A SALA</h2>
            <button class="btn-atras" onclick="confirmarSalirSala()">INICIO</button>
        </div>

        <div class="configuracion">
            <label for="codigoSalaUnirse">C√≥digo de Sala:</label>
            <input type="text" id="codigoSalaUnirse" placeholder="Ej: ABC12" maxlength="5"
                style="text-transform: uppercase;">
        </div>

        <div class="row">
            <button onclick="unirseSala()">UNIRSE</button>
        </div>
    </div>

    <!-- Sala Unido (para no creadores) -->
    <div class="screen hidden" id="multijugador-sala-unido">
        <div class="header-container">
            <button class="btn-atras" onclick="confirmarSalirSala()">INICIO</button>
            <div style="text-align: center; flex: 1;">
                <h2 class="header-title">SALA</h2>
                <div style="font-size: 16px; color: #00ccff; margin-top: 5px; font-weight: 500;">ID: <span
                        id="codigoSalaUnido">-</span></div>
            </div>
            <div style="width: 70px;"></div>
        </div>

        <div style="background: #1a1a1a; padding: 15px; border-radius: 8px; margin: 15px 0; border: 1px solid #333;">
            <h3 style="margin-top: 0; color: white; margin-bottom: 10px;">CONFIGURACI√ìN</h3>
            <div id="configResumen"></div>
        </div>

        <div style="background: #1a1a1a; padding: 15px; border-radius: 8px; border: 1px solid #333;">
            <h3 style="margin-top: 0; color: white; margin-bottom: 10px;">JUGADORES (<span
                    id="jugadoresActualesUnido">0</span>/<span id="maxJugadoresDisplayUnido">4</span>)</h3>
            <div id="listaJugadoresUnido">
                <!-- Logo en el lobby del jugador -->
                <div style="text-align: center; padding: 15px; opacity: 0.7;">
                    <div class="logo-medium">
                        <img src="logo_impostor.svg" alt="Logo IMPOSTOR">
                    </div>
                </div>
            </div>
        </div>

        <div style="margin: 40px 0; text-align: center;">
            <div style="font-size: 18px; color: #ccc;">Esperando al creador...</div>
            <div style="margin-top: 10px; color: #777;">El creador iniciar√° el juego</div>
        </div>
    </div>

    <!-- Pantalla para VER la Palabra -->
    <div class="screen hidden" id="multijugador-ver-palabra">
        <div class="header-container">
            <div style="width: 70px;"></div>
            <div style="text-align: center; flex: 1;">
                <h2 class="header-title">TU TURNO</h2>
                <div style="font-size: 16px; color: #00ccff; margin-top: 5px; font-weight: 500;">ID: <span
                        id="tituloJugadorMultijugadorVer">-</span></div>
            </div>
            <button class="btn-atras" onclick="confirmarSalirSala()">INICIO</button>
        </div>

        <div class="info-jugador">
            <div class="nombre-jugador-display" id="nombreJugadorMultijugadorVer">Jugador</div>
            <div class="info-detalle">
                <div class="info-item">
                    <span class="info-label">Categor√≠a:</span>
                    <span id="categoriaJugadorMultijugadorVer" class="info-valor">Categor√≠a</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Dificultad:</span>
                    <span id="dificultadJugadorMultijugadorVer" class="info-valor">F√°cil</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Impostores:</span>
                    <span id="impostoresJugadorMultijugadorVer" class="info-valor">1</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Jugadores:</span>
                    <span id="totalJugadoresMultijugadorVer" class="info-valor">4</span>
                </div>
            </div>
        </div>

        <div id="textoPalabraOculto" class="palabra-display" style="color: #ccc; border-color: #444;">
            ???
        </div>

        <div class="row">
            <button id="btnVerPalabraMultijugador" onclick="verPalabraMultijugador()">üëÅÔ∏è VER</button>
        </div>
    </div>

    <!-- Pantalla con Palabra Revelada -->
    <div class="screen hidden" id="multijugador-palabra-revelada">
        <div class="header-container">
            <div style="width: 70px;"></div>
            <div style="text-align: center; flex: 1;">
                <h2 class="header-title">TU PALABRA</h2>
                <div style="font-size: 16px; color: #00ccff; margin-top: 5px; font-weight: 500;">ID: <span
                        id="tituloJugadorMultijugadorRevelado">-</span></div>
            </div>
            <button class="btn-atras" onclick="confirmarSalirSala()">INICIO</button>
        </div>

        <div class="info-jugador">
            <div class="nombre-jugador-display" id="nombreJugadorMultijugadorRevelado">Jugador</div>
            <div class="info-detalle">
                <div class="info-item">
                    <span class="info-label">Categor√≠a:</span>
                    <span id="categoriaJugadorMultijugadorRevelado" class="info-valor">Categor√≠a</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Dificultad:</span>
                    <span id="dificultadJugadorMultijugadorRevelado" class="info-valor">F√°cil</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Impostores:</span>
                    <span id="impostoresJugadorMultijugadorRevelado" class="info-valor">1</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Jugadores:</span>
                    <span id="totalJugadoresMultijugadorRevelado" class="info-valor">4</span>
                </div>
            </div>
        </div>

        <div id="textoPalabraRevelada" class="palabra-display">Palabra</div>

        <div class="row">
            <button id="btnListoMultijugador" onclick="marcarListo()">‚úÖ LISTO</button>
        </div>
    </div>

    <!-- Pantalla Final Multijugador -->
    <div class="screen hidden" id="multijugador-final">
        <div class="header-container">
            <div style="width: 70px;"></div>
            <div style="text-align: center; flex: 1;">
                <h2 class="header-title">FIN DEL JUEGO</h2>
                <div style="font-size: 16px; color: #00ccff; margin-top: 5px; font-weight: 500;">ID: <span
                        id="codigoTextoFinal">-</span></div>
            </div>
            <button class="btn-atras" onclick="confirmarSalirSala()">INICIO</button>
        </div>

        <!-- Contenedor para revelar impostor -->
        <div class="revelar-container">
            <div class="impostor-info hidden" id="impostorReveladoMultijugador">
                <div class="impostor-titulo" id="impostorTituloMultijugador">EL IMPOSTOR ES:</div>
                <div id="impostorReveladoTextoMultijugador" class="impostor-nombre">Jugador</div>
            </div>

            <!-- CORREGIDO: ID √∫nico para palabra en multijugador -->
            <div class="impostor-info hidden" id="palabraReveladaMultijugador" style="margin-top: 20px; border-color: #4CAF50; background: rgba(76, 175, 80, 0.05);">
                <div class="impostor-titulo" style="color: #4CAF50;">LA PALABRA ERA:</div>
                <div id="palabraReveladaTextoMultijugador" class="impostor-nombre" style="color: #4CAF50;">Palabra</div>
            </div>

            <div class="row">
                <button id="btnVotarImpostor" onclick="votarImpostor()">üîç REVELAR IMPOSTOR Y PALABRA</button>
            </div>
        </div>

        <div class="row-buttons" id="opcionesCreador" style="display: none;">
            <button onclick="volveraJugarMultijugador()">VOLVER A JUGAR</button>
            <button onclick="volverConfiguracionMultijugador()">CONFIGURACI√ìN</button>
        </div>
    </div>

    <!-- Modal de Confirmaci√≥n -->
    <div id="confirmModal" class="modal-salida hidden">
        <div class="modal-box">
            <h3 style="margin-top: 0; color: white;">CONFIRMACI√ìN</h3>
            <p id="confirmText" style="font-size: 16px; color: #ccc;">¬øEst√°s seguro que quieres salir?</p>
            <div class="modal-buttons">
                <button onclick="confirmSalir(true)">SALIR</button>
                <button onclick="confirmSalir(false)">CANCELAR</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>

</html>
